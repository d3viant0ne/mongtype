"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("./types");
function Collection(props) {
    return function (target) {
        Reflect.defineMetadata(types_1.COLLECTION_KEY, props, target.prototype);
    };
}
exports.Collection = Collection;
function Before(...events) {
    return function (target, name, descriptor) {
        for (const event of events) {
            const fns = Reflect.getMetadata(`${types_1.PRE_KEY}_${event}`, target) || [];
            fns.push(target[name]);
            Reflect.defineMetadata(`${types_1.PRE_KEY}_${event}`, fns, target);
        }
    };
}
exports.Before = Before;
function After(...events) {
    return function (target, name, descriptor) {
        for (const event of events) {
            const fns = Reflect.getMetadata(`${types_1.POST_KEY}_${event}`, target) || [];
            fns.push(target[name]);
            Reflect.defineMetadata(`${types_1.POST_KEY}_${event}`, fns, target);
        }
    };
}
exports.After = After;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdG9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9kZWNvcmF0b3JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQTZFO0FBRTdFLG9CQUEyQixLQUFzQjtJQUMvQyxNQUFNLENBQUMsVUFBUyxNQUFXO1FBQ3pCLE9BQU8sQ0FBQyxjQUFjLENBQUMsc0JBQWMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0lBQ2xFLENBQUMsQ0FBQztBQUNKLENBQUM7QUFKRCxnQ0FJQztBQUVELGdCQUF1QixHQUFHLE1BQWdCO0lBQ3hDLE1BQU0sQ0FBQyxVQUFTLE1BQVcsRUFBRSxJQUFZLEVBQUUsVUFBd0M7UUFDakYsR0FBRyxDQUFBLENBQUMsTUFBTSxLQUFLLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztZQUMxQixNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsZUFBTyxJQUFJLEtBQUssRUFBRSxFQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUNyRSxHQUFHLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDO1lBQ3ZCLE9BQU8sQ0FBQyxjQUFjLENBQUMsR0FBRyxlQUFPLElBQUksS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzdELENBQUM7SUFDSCxDQUFDLENBQUM7QUFDSixDQUFDO0FBUkQsd0JBUUM7QUFFRCxlQUFzQixHQUFHLE1BQWdCO0lBQ3ZDLE1BQU0sQ0FBQyxVQUFTLE1BQVcsRUFBRSxJQUFZLEVBQUUsVUFBd0M7UUFDakYsR0FBRyxDQUFBLENBQUMsTUFBTSxLQUFLLElBQUksTUFBTSxDQUFDLENBQUMsQ0FBQztZQUMxQixNQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLEdBQUcsZ0JBQVEsSUFBSSxLQUFLLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDdEUsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN2QixPQUFPLENBQUMsY0FBYyxDQUFDLEdBQUcsZ0JBQVEsSUFBSSxLQUFLLEVBQUUsRUFBRSxHQUFHLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDOUQsQ0FBQztJQUNILENBQUMsQ0FBQztBQUNKLENBQUM7QUFSRCxzQkFRQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENPTExFQ1RJT05fS0VZLCBQUkVfS0VZLCBQT1NUX0tFWSwgQ29sbGVjdGlvblByb3BzIH0gZnJvbSAnLi90eXBlcyc7XG5cbmV4cG9ydCBmdW5jdGlvbiBDb2xsZWN0aW9uKHByb3BzOiBDb2xsZWN0aW9uUHJvcHMpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldDogYW55KSB7XG4gICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShDT0xMRUNUSU9OX0tFWSwgcHJvcHMsIHRhcmdldC5wcm90b3R5cGUpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQmVmb3JlKC4uLmV2ZW50czogc3RyaW5nW10pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldDogYW55LCBuYW1lOiBzdHJpbmcsIGRlc2NyaXB0b3I6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPGFueT4pIHtcbiAgICBmb3IoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICBjb25zdCBmbnMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKGAke1BSRV9LRVl9XyR7ZXZlbnR9YCwgdGFyZ2V0KSB8fCBbXTtcbiAgICAgIGZucy5wdXNoKHRhcmdldFtuYW1lXSk7XG4gICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGAke1BSRV9LRVl9XyR7ZXZlbnR9YCwgZm5zLCB0YXJnZXQpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFmdGVyKC4uLmV2ZW50czogc3RyaW5nW10pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldDogYW55LCBuYW1lOiBzdHJpbmcsIGRlc2NyaXB0b3I6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPGFueT4pIHtcbiAgICBmb3IoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICBjb25zdCBmbnMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKGAke1BPU1RfS0VZfV8ke2V2ZW50fWAsIHRhcmdldCkgfHwgW107XG4gICAgICBmbnMucHVzaCh0YXJnZXRbbmFtZV0pO1xuICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShgJHtQT1NUX0tFWX1fJHtldmVudH1gLCBmbnMsIHRhcmdldCk7XG4gICAgfVxuICB9O1xufVxuIl19