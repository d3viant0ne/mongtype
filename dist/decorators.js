"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const types_1 = require("./types");
function Collection(props) {
    return function (target) {
        Reflect.defineMetadata(types_1.NAME_KEY, props.name, target.prototype);
    };
}
exports.Collection = Collection;
function Before(...events) {
    return function (target, name, descriptor) {
        for (const event of events) {
            const fns = Reflect.getMetadata(`${types_1.PRE_KEY}_${event}`, target) || [];
            fns.push(target[name]);
            Reflect.defineMetadata(`${types_1.PRE_KEY}_${event}`, fns, target);
        }
    };
}
exports.Before = Before;
function After(...events) {
    return function (target, name, descriptor) {
        for (const event of events) {
            const fns = Reflect.getMetadata(`${types_1.POST_KEY}_${event}`, target) || [];
            fns.push(target[name]);
            Reflect.defineMetadata(`${types_1.POST_KEY}_${event}`, fns, target);
        }
    };
}
exports.After = After;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVjb3JhdG9ycy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uL3NyYy9kZWNvcmF0b3JzLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsbUNBQXVFO0FBRXZFLG9CQUEyQixLQUFzQjtJQUMvQyxNQUFNLENBQUMsVUFBUyxNQUFXO1FBQ3pCLE9BQU8sQ0FBQyxjQUFjLENBQUMsZ0JBQVEsRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQztJQUNqRSxDQUFDLENBQUM7QUFDSixDQUFDO0FBSkQsZ0NBSUM7QUFFRCxnQkFBdUIsR0FBRyxNQUFnQjtJQUN4QyxNQUFNLENBQUMsVUFBUyxNQUFXLEVBQUUsSUFBWSxFQUFFLFVBQXdDO1FBQ2pGLEdBQUcsQ0FBQSxDQUFDLE1BQU0sS0FBSyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLGVBQU8sSUFBSSxLQUFLLEVBQUUsRUFBRSxNQUFNLENBQUMsSUFBSSxFQUFFLENBQUM7WUFDckUsR0FBRyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztZQUN2QixPQUFPLENBQUMsY0FBYyxDQUFDLEdBQUcsZUFBTyxJQUFJLEtBQUssRUFBRSxFQUFFLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUM3RCxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0FBQ0osQ0FBQztBQVJELHdCQVFDO0FBRUQsZUFBc0IsR0FBRyxNQUFnQjtJQUN2QyxNQUFNLENBQUMsVUFBUyxNQUFXLEVBQUUsSUFBWSxFQUFFLFVBQXdDO1FBQ2pGLEdBQUcsQ0FBQSxDQUFDLE1BQU0sS0FBSyxJQUFJLE1BQU0sQ0FBQyxDQUFDLENBQUM7WUFDMUIsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLFdBQVcsQ0FBQyxHQUFHLGdCQUFRLElBQUksS0FBSyxFQUFFLEVBQUUsTUFBTSxDQUFDLElBQUksRUFBRSxDQUFDO1lBQ3RFLEdBQUcsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7WUFDdkIsT0FBTyxDQUFDLGNBQWMsQ0FBQyxHQUFHLGdCQUFRLElBQUksS0FBSyxFQUFFLEVBQUUsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQzlELENBQUM7SUFDSCxDQUFDLENBQUM7QUFDSixDQUFDO0FBUkQsc0JBUUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOQU1FX0tFWSwgUFJFX0tFWSwgUE9TVF9LRVksIENvbGxlY3Rpb25Qcm9wcyB9IGZyb20gJy4vdHlwZXMnO1xuXG5leHBvcnQgZnVuY3Rpb24gQ29sbGVjdGlvbihwcm9wczogQ29sbGVjdGlvblByb3BzKSB7XG4gIHJldHVybiBmdW5jdGlvbih0YXJnZXQ6IGFueSkge1xuICAgIFJlZmxlY3QuZGVmaW5lTWV0YWRhdGEoTkFNRV9LRVksIHByb3BzLm5hbWUsIHRhcmdldC5wcm90b3R5cGUpO1xuICB9O1xufVxuXG5leHBvcnQgZnVuY3Rpb24gQmVmb3JlKC4uLmV2ZW50czogc3RyaW5nW10pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldDogYW55LCBuYW1lOiBzdHJpbmcsIGRlc2NyaXB0b3I6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPGFueT4pIHtcbiAgICBmb3IoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICBjb25zdCBmbnMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKGAke1BSRV9LRVl9XyR7ZXZlbnR9YCwgdGFyZ2V0KSB8fCBbXTtcbiAgICAgIGZucy5wdXNoKHRhcmdldFtuYW1lXSk7XG4gICAgICBSZWZsZWN0LmRlZmluZU1ldGFkYXRhKGAke1BSRV9LRVl9XyR7ZXZlbnR9YCwgZm5zLCB0YXJnZXQpO1xuICAgIH1cbiAgfTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIEFmdGVyKC4uLmV2ZW50czogc3RyaW5nW10pIHtcbiAgcmV0dXJuIGZ1bmN0aW9uKHRhcmdldDogYW55LCBuYW1lOiBzdHJpbmcsIGRlc2NyaXB0b3I6IFR5cGVkUHJvcGVydHlEZXNjcmlwdG9yPGFueT4pIHtcbiAgICBmb3IoY29uc3QgZXZlbnQgb2YgZXZlbnRzKSB7XG4gICAgICBjb25zdCBmbnMgPSBSZWZsZWN0LmdldE1ldGFkYXRhKGAke1BPU1RfS0VZfV8ke2V2ZW50fWAsIHRhcmdldCkgfHwgW107XG4gICAgICBmbnMucHVzaCh0YXJnZXRbbmFtZV0pO1xuICAgICAgUmVmbGVjdC5kZWZpbmVNZXRhZGF0YShgJHtQT1NUX0tFWX1fJHtldmVudH1gLCBmbnMsIHRhcmdldCk7XG4gICAgfVxuICB9O1xufVxuIl19